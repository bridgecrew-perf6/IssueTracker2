{"ast":null,"code":"import { apiCall } from \"../../services/api\";\nimport { ADD_ISSUE, LOAD_ISSUES, REMOVE_ISSUES, UPDATE_ISSUES } from \"../actionTypes\";\nimport { addError, removeError } from './errorActions'; //api call syntax apiCall(method, path, payload)\n\nfunction loadIssues(issues) {\n  return {\n    type: LOAD_ISSUES,\n    issues\n  };\n}\n\nfunction updateIssue(id, newIssue) {\n  return {\n    type: UPDATE_ISSUES,\n    id,\n    issue: newIssue\n  };\n}\n\nfunction removeIssue(id) {\n  return {\n    type: REMOVE_ISSUES,\n    id\n  };\n}\n\nfunction addIssue(issue) {\n  return {\n    type: ADD_ISSUE,\n    issue\n  };\n}\n\nexport function getIssues() {\n  return dispatch => {\n    apiCall(\"get\", \"/api/issues\").then(res => {\n      dispatch(loadIssues(res));\n    });\n  };\n}\nexport function postIssue(issueData) {\n  return async (dispatch, getState) => {\n    return new Promise((resolve, reject) => {\n      const {\n        currentUser\n      } = getState();\n      const {\n        id\n      } = currentUser.user;\n      apiCall(\"post\", `/api/users/${id}/issues`, issueData).then(res => {\n        dispatch(removeError());\n        dispatch(addIssue(res));\n        resolve();\n      }).catch(err => {\n        dispatch(addError(err.message));\n        reject();\n      });\n    });\n  };\n}\nexport function patchIssue(issueId, issueData) {\n  return (dispatch, getState) => {\n    return new Promise((resolve, reject) => {\n      const {\n        currentUser\n      } = getState();\n      const {\n        id\n      } = currentUser.user;\n      apiCall(\"patch\", `/api/users/${id}/issues/${issueId}`, issueData).then(res => {\n        dispatch(removeError());\n        dispatch(updateIssue(res.issue._id, res.issue));\n        resolve();\n      }).catch(err => {\n        dispatch(addError(err.message));\n        reject();\n      });\n    });\n  };\n}\nexport function deleteIssue(issueId) {\n  return (dispatch, getState) => {\n    const {\n      currentUser\n    } = getState();\n    const {\n      id\n    } = currentUser.user;\n    apiCall(\"delete\", `/api/users/${id}/issues/${issueId}`).then(res => dispatch(removeIssue(res.issue._id))).catch(err => console.log(err.message));\n  };\n}","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/store/actions/issueActions.js"],"names":["apiCall","ADD_ISSUE","LOAD_ISSUES","REMOVE_ISSUES","UPDATE_ISSUES","addError","removeError","loadIssues","issues","type","updateIssue","id","newIssue","issue","removeIssue","addIssue","getIssues","dispatch","then","res","postIssue","issueData","getState","Promise","resolve","reject","currentUser","user","catch","err","message","patchIssue","issueId","_id","deleteIssue","console","log"],"mappings":"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","sourcesContent":["import { apiCall } from \"../../services/api\";\nimport { ADD_ISSUE, LOAD_ISSUES, REMOVE_ISSUES, UPDATE_ISSUES } from \"../actionTypes\";\nimport { addError, removeError } from './errorActions'\n\n//api call syntax apiCall(method, path, payload)\nfunction loadIssues(issues) {\n    return {\n        type: LOAD_ISSUES,\n        issues\n    }\n}\n\nfunction updateIssue(id, newIssue) {\n    return {\n        type: UPDATE_ISSUES,\n        id,\n        issue: newIssue\n    }\n}\n\nfunction removeIssue(id) {\n    return {\n        type: REMOVE_ISSUES,\n        id\n    }\n}\n\nfunction addIssue(issue) {\n    return {\n        type: ADD_ISSUE,\n        issue\n    }\n}\n\nexport function getIssues() {\n    return dispatch => {\n        apiCall(\"get\", \"/api/issues\")\n            .then(res => {\n                dispatch(loadIssues(res))\n            })\n    }\n}\n\nexport function postIssue(issueData) {\n    return async (dispatch, getState) => {\n        return new Promise((resolve, reject) => {\n            const { currentUser } = getState()\n            const { id } = currentUser.user\n            apiCall(\"post\", `/api/users/${id}/issues`, issueData)\n            .then(res => {\n                dispatch(removeError())\n                dispatch(addIssue(res))\n                resolve()\n            })\n            .catch(err => {\n                dispatch(addError(err.message))\n                reject()\n            })\n        })\n    }\n}\n\n\n\nexport function patchIssue(issueId, issueData) {\n    return (dispatch, getState) => {\n        return new Promise((resolve, reject) => {\n            const { currentUser } = getState()\n            const { id } = currentUser.user\n            apiCall(\"patch\", `/api/users/${id}/issues/${issueId}`, issueData)\n            .then(res => {\n                dispatch(removeError())\n                dispatch(updateIssue(res.issue._id, res.issue))\n                resolve()\n            })\n            .catch(err => {\n                dispatch(addError(err.message))\n                reject()\n            })\n        })\n    }\n}\n\nexport function deleteIssue(issueId) {\n    return (dispatch, getState) => {\n        const { currentUser } = getState()\n        const { id } = currentUser.user\n        apiCall(\"delete\", `/api/users/${id}/issues/${issueId}`)\n            .then(res => dispatch(removeIssue(res.issue._id)))\n            .catch(err => console.log(err.message))\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}